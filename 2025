async function getTotalSpent2025() {
  console.log('ğŸ” Äang tÃ­nh tá»•ng chi tiÃªu nÄƒm 2025...\n');
  
  let total = 0;
  let orderCount = 0;
  let offset = 0;
  const limit = 20;
  let foundOlderYear = false;
  
  while (true) {
    // Fetch batch
    const response = await fetch(
      `/api/v4/order/get_all_order_and_checkout_list?_oft=0&limit=${limit}&offset=${offset}`
    );
    const data = await response.json();
    
    // Háº¿t Ä‘Æ¡n thÃ¬ dá»«ng
    if (!data.new_data?.order_or_checkout_data?.length) {
      break;
    }
    
    const orders = data.new_data.order_or_checkout_data;
    
    // Duyá»‡t tá»«ng Ä‘Æ¡n trong batch
    for (const item of orders) {
      const order = item.order_list_detail;
      
      // Check an toÃ n
      if (!order.shipping?.tracking_info?.ctime) {
        continue;
      }
      
      const timestamp = order.shipping.tracking_info.ctime;
      const date = new Date(timestamp * 1000);
      const year = date.getFullYear();
      
      if (year === 2025) {
        // Cá»™ng Ä‘Æ¡n 2025
        const amount = order.info_card.final_total / 100000;
        total += amount;
        orderCount++;
      } else if (year < 2025) {
        // Gáº·p Ä‘Æ¡n cÅ© hÆ¡n 2025 â†’ Ä‘Ã¡nh dáº¥u Ä‘á»ƒ dá»«ng
        foundOlderYear = true;
        break;
      }
    }
    
    console.log(`âœ“ ÄÃ£ quÃ©t ${offset + orders.length} Ä‘Æ¡n...`);
    
    // Náº¿u Ä‘Ã£ gáº·p nÄƒm cÅ© â†’ Dá»ªNG
    if (foundOlderYear) {
      console.log('â„¹ï¸ ÄÃ£ gáº·p Ä‘Æ¡n nÄƒm 2024, dá»«ng quÃ©t.\n');
      break;
    }
    
    // Tiáº¿p tá»¥c batch tiáº¿p theo
    offset += limit;
    
    // Delay nháº¹
    await new Promise(r => setTimeout(r, 500));
  }
  
  console.log('='.repeat(50));
  console.log('ğŸ“Š Káº¾T QUáº¢ NÄ‚M 2025:');
  console.log('='.repeat(50));
  console.log(`ğŸ’° Tá»•ng chi tiÃªu: ${total.toLocaleString('vi-VN')}â‚«`);
  console.log(`ğŸ“¦ Sá»‘ Ä‘Æ¡n hÃ ng: ${orderCount} Ä‘Æ¡n`);
  if (orderCount > 0) {
    console.log(`ğŸ’µ Trung bÃ¬nh/Ä‘Æ¡n: ${(total/orderCount).toLocaleString('vi-VN')}â‚«`);
  }
  console.log('='.repeat(50));
  
  return total;
}

// Cháº¡y
getTotalSpent2025();
